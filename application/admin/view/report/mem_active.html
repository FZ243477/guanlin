<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{:getSetting('system.title')} </title>


    <link href="home_url/css/bootstrap.min.css" rel="stylesheet">
    <link href="home_url/css/font-awesome.css-v=4.4.0.css" rel="stylesheet">
    <style>

        .form_left {
            float: left;
            margin-right: 10px;
            line-height: 30px;
        }
        .btn {
            position: relative;
            display: inline-block;
            padding: 0 12px;
            height: 30px;
            line-height: 28px;
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            border-radius: 2px;
            border: 1px solid #ccc;
            vertical-align: baseline;
            margin-top: 1px;
            margin-bottom: 2px;
        }
        .box-title {
            text-align: center;
        }
    </style>
    <!-- Morris -->
    <link href="home_url/css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">
    <link href="home_url/css/jbox-min.css" tppabs="css/style.min.css" rel="stylesheet">
    <!-- Gritter -->
    <link href="home_url/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
    <link href="home_url/css/style.min.css" tppabs="css/style.min.css" rel="stylesheet">
    {include file="base:base" /}
</head>

<body class="gray-bg">
<div class="wrapper wrapper-content">
    <div class="content-right fl">
        <div class="ibox-title">
            <h5>活跃会员统计明细</h5>
        </div>

        <div class="ibox-content">
        <div class="content-right fl">


            <!-- <a  style="float:right;margin-right:20px;" href="javascript:void(0);" class="btn btn-warning order_export">记录导出</a>
             <div class="chartWrap mgt15 clearfix">-->
            <table class="wxtables data mgt15">
                <colgroup>
                    <col width="13%">
                    <col width="13%">
                    <col width="13%">
                    <col width="13%">
                    <col width="13%">
                    <col width="13%">
                    <col width="13%">
                </colgroup>
                <thead>
                <tr>
                    <td colspan="8" class="left" style="font-size:14px;">
                        <div class="row">
                            <div class="tables-searchbox newcearchbox">
                                <form>
                                    <div class="form_left">
                                        <input type="text"  name="start_time" id="start" class="input-sm form-control"  value="{$start_time}" placeholder="开始时间" class="input Wdate mini" style="border-color:#ccc" autocomplete="off">
                                    </div>
                                    <div class="form_left">
                                        <span class="mgr5">至</span>
                                    </div>
                                    <div class="form_left">
                                        <input type="text"  name="end_time" id="end" class="input-sm form-control" value="{$end_time}" placeholder="结束时间" class="input Wdate mini" style="border-color:#ccc" autocomplete="off">
                                    </div>
                                    <button class="btn btn-warning input-sm"><i class="gicon-search white"></i>查询</button>
                                </form>

                            </div>

                        </div>
                    </td>

                </tr>
                </thead>
                <tbody>
               
                </tbody>
            </table>

            <div class="chartWrap mgt15 clearfix">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">用户活跃度</h3>
                                <div class="box-tools"></div>
                                <div class="box-tools pull-right">
                                  <!--  <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>-->
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="chart">
                                    <div id="statistics" style="height: 400px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chartWrap mgt15 clearfix">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">用户使用时段分析</h3>
                                <div class="box-tools"></div>
                                <div class="box-tools pull-right">
                                    <!--<button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>-->
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="chart">
                                    <div id="statistics1" style="height: 400px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- end wxtables -->
            <div class="tables-btmctrl clearfix">
                <div class="fr">
                    <div class="paginate">
                    </div>
                    <!-- end paginate -->
                </div>
            </div>        <!-- end tables-btmctrl -->
        </div>


    </div>
    <!-- end content-right -->
</div>
</div>

<!-- end container -->


<script src="home_url/js/jquery.min.js" tppabs="staticfile/jquery/2.1.4/jquery.min.js"></script>
<script src="home_url/js/bootstrap.min.js" tppabs="bootcss/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.js" tppabs="js/plugins/flot/jquery.flot.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.tooltip.min.js" tppabs="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.spline.js" tppabs="js/plugins/flot/jquery.flot.spline.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.resize.js" tppabs="js/plugins/flot/jquery.flot.resize.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.pie.js" tppabs="js/plugins/flot/jquery.flot.pie.js"></script>
<script src="home_url/js/plugins/flot/jquery.flot.symbol.js" tppabs="js/plugins/flot/jquery.flot.symbol.js"></script>
<script src="home_url/js/plugins/peity/jquery.peity.min.js" tppabs="js/plugins/peity/jquery.peity.min.js"></script>
<script src="home_url/js/peity-demo.min.js" tppabs="js/demo/peity-demo.min.js"></script>
<script src="home_url/js/content.min.js" tppabs="js/content.min.js?v=1.0.0"></script>
<script src="home_url/js/plugins/jquery-ui/jquery-ui.min.js" tppabs="js/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="home_url/js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js" tppabs="js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="home_url/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" tppabs="js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<script src="home_url/js/plugins/easypiechart/jquery.easypiechart.js" tppabs="js/plugins/easypiechart/jquery.easypiechart.js"></script>
<script src="home_url/js/plugins/sparkline/jquery.sparkline.min.js" tppabs="js/plugins/sparkline/jquery.sparkline.min.js"></script>
<script src="home_url/js/sparkline-demo.min.js" tppabs="js/demo/sparkline-demo.min.js"></script>
<script type="text/javascript" src="home_url/js/contabs.min.js"></script>
<script src="home_url/js/plugins/layer/laydate/laydate.js"></script>
<script src="home_url/js/plugins/echarts/echarts-all.js"></script>


<script>
    var start = {
        elem: "#start",
        format: "YYYY-MM-DD",
        //max: laydate.now(),
        min: "2000-01-01",
        istime: true,
        istoday: false,
        choose: function (datas) {
            end.min = datas;
        }
    };
    var end = {
        elem: "#end",
        format: "YYYY-MM-DD",
        //max: laydate.now(),
        min: "2000-01-01",
        istime: true,
        istoday: false,
        choose: function (datas) {

            start.max = datas
        }
    };
    laydate(start);
    laydate(end);
    var myChart = echarts.init(document.getElementById('statistics'),'macarons');
    var res = {$result};
    console.log(res);
    option = {
        title : {
            text: '活跃会员数量'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['活跃会员']
        },
        toolbox: {
            show : true,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [
            {
                type : 'category',
                boundaryGap : false,
                data : res.time
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} 人'
                }
            }
        ],
        series : [
            {
                name:'活跃会员',
                type:'line',
                data:res.data
            }
        ]
    };
    myChart.setOption(option);
    $(document).ready(function() {
        $('#start_time').daterangepicker({
            format:"YYYY-MM-DD",
            singleDatePicker: false,
            showDropdowns: true,
            minDate:'2016-01-01',
            maxDate:'2030-01-01',
            startDate:'2016-01-01',
            showWeekNumbers: true,
            timePicker: false,
            timePickerIncrement: 1,
            timePicker12Hour: true,
            ranges: {
                '今天': [moment(), moment()],
                '昨天': [moment().subtract('days', 1), moment().subtract('days', 1)],
                '最近7天': [moment().subtract('days', 6), moment()],
                '最近30天': [moment().subtract('days', 29), moment()],
                '上一个月': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
            },
            opens: 'right',
            buttonClasses: ['btn btn-default'],
            applyClass: 'btn-small btn-warning',
            cancelClass: 'btn-small',
            locale : {
                applyLabel : '确定',
                cancelLabel : '取消',
                fromLabel : '起始时间',
                toLabel : '结束时间',
                customRangeLabel : '自定义',
                daysOfWeek : [ '日', '一', '二', '三', '四', '五', '六' ],
                monthNames : [ '一月', '二月', '三月', '四月', '五月', '六月','七月', '八月', '九月', '十月', '十一月', '十二月' ],
                firstDay : 1
            }
        });
    });
</script>

<script type="text/javascript">
    var myChart1 = echarts.init(document.getElementById('statistics1'),'macarons');
    var res1 = {$result1};
    //console.log(res1);
    option1 = {
        title : {
            text: '活跃会员数量'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['活跃会员数量']
        },
        toolbox: {
            show : true,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [
            {
                type : 'category',
                boundaryGap : false,
                data : res1.time
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} 人'
                }
            }
        ],
        series : [
            {
                name:'活跃会员数量',
                type:'line',
                data:res1.data
            }
        ]
    };
    myChart1.setOption(option1);
</script>

</body>

</html>